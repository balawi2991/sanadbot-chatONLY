# ๐ ุชูุฑูุฑ ุงูุชุดุฎูุต ุงููุงูู ููุธุงู ุงูุชุถููู

## ๐ ููุฎุต ุงูุชุญููู

ุชู ุฅุฌุฑุงุก ุชุญููู ุดุงูู ูููู ุณุจุจ ุนุฏู ุธููุฑ ุงูุจูุช ุนูุฏ ุงูุชุถููู ูู ุงูููุงูุน ุงูุฎุงุฑุฌูุฉุ ูุชู ุงูุชุดุงู ูุญู ุนุฏุฉ ูุดุงูู ูููุฉ.

## ๐ฏ ุงููุดุงูู ุงูููุชุดูุฉ ูุงูุญููู

### 1. โ ุชุถุงุฑุจ ูู ุฃุณูุงุก ุงูุฎุตุงุฆุต

**ุงููุดููุฉ:**
- ููุฏ ุงูุชุถููู ูู ุงูุฏุงุดุจูุฑุฏ ูุณุชุฎุฏู: `data-bot-id`
- ููู `embed.js` ูุงู ูุจุญุซ ุนู: `data-agent-id`
- ูุฐุง ุงูุชุถุงุฑุจ ูููุน `embed.js` ูู ูุฑุงุกุฉ ูุนุฑู ุงูุจูุช

**ุงูุญู ุงููุทุจู:**
```javascript
// ุชู ุชุญุฏูุซ embed.js ูุฏุนู ููุง ุงูุฎุงุตูุชูู
const currentScript = document.currentScript || document.querySelector('script[data-agent-id], script[data-bot-id]');
const botId = currentScript?.getAttribute('data-agent-id') || currentScript?.getAttribute('data-bot-id');
```

### 2. โ ุนุฏู ูุฌูุฏ ุจูุงูุงุช ุงูุจูุช ุงูุชุฌุฑูุจู

**ุงููุดููุฉ:**
- ุงูุจูุช ุจูุนุฑู "demo" ูู ููู ููุฌูุฏุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- API ูุงู ูุนูุฏ ุฎุทุฃ 404 ููุจูุช ุบูุฑ ุงูููุฌูุฏ

**ุงูุญู ุงููุทุจู:**
```bash
# ุชู ุชุดุบูู ุณูุฑููพุช ุงูุจุฐุฑ ูุฅูุดุงุก ุงูุจูุช ุงูุชุฌุฑูุจู
npm run db:seed
```

## โ ุญุงูุฉ ุงููุธุงู ุงูุญุงููุฉ

### ๐ง ุงูููููุงุช ุงูุชู ุชุนูู ุจูุฌุงุญ:

1. **ููู embed.js:**
   - โ ูุชู ุชุญูููู ูู `/embed.js`
   - โ ูุฏุนู ููุงู ูู `data-bot-id` ู `data-agent-id`
   - โ ูููุน ุงูุชุญููู ุงููุชูุฑุฑ
   - โ ูุนุฑุถ ุฑุณุงุฆู ุชุดุฎูุตูุฉ ูุงุถุญุฉ

2. **API Endpoint:**
   - โ `/api/widget/[botId]` ูุนูู ุจูุฌุงุญ
   - โ ูุนูุฏ JavaScript bundle ููุจูุช
   - โ ูุฏุนู CORS ููููุงูุน ุงูุฎุงุฑุฌูุฉ
   - โ ูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ

3. **ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   - โ ุงูุจูุช ุงูุชุฌุฑูุจู "demo" ููุฌูุฏ ููุดุท
   - โ ูุญุชูู ุนูู ุฃุณุฆูุฉ ูุฃุฌูุจุฉ ุชุฌุฑูุจูุฉ
   - โ ูุญุชูู ุนูู ูุตุงุฏุฑ ูุนุฑูุฉ ุชุฌุฑูุจูุฉ

4. **ุงููุธุงู ุงููุฑูุฒู:**
   - โ `widget-core.ts` ูุฏูุฑ ุงูุจูุชุงุช ุจููุงุกุฉ
   - โ `widget-generator.ts` ููุดุฆ ููุฏ JavaScript ููุญุฏ
   - โ ูุธุงู ุงููุงุด ูุนูู ุจุดูู ุตุญูุญ

## ๐งช ุงุฎุชุจุงุฑุงุช ุงูุชุญูู

### ุตูุญุฉ ุงูุงุฎุชุจุงุฑ ุงูุฌุฏูุฏุฉ:
- ๐ `test-dashboard-embed.html` - ุชุฎุชุจุฑ ููุฏ ุงูุชุถููู ุงููุนูู ูู ุงูุฏุงุดุจูุฑุฏ
- ๐ ูุชุงุญุฉ ุนูู: `http://localhost:3002/test-dashboard-embed.html`

### ููุฏ ุงูุชุถููู ุงูููุฎุชุจุฑ:
```html
<script src="http://localhost:3002/embed.js" data-bot-id="demo"></script>
```

## ๐ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ

### โ ูุง ูุนูู ุงูุขู:
1. **ุชุญููู ุงูุณูุฑููพุช:** embed.js ูุชู ุชุญูููู ุจูุฌุงุญ
2. **ูุฑุงุกุฉ ุงููุนุฑู:** ููุฑุฃ `data-bot-id` ุจุดูู ุตุญูุญ
3. **ุงุณุชุฏุนุงุก API:** `/api/widget/demo` ูุนูุฏ ููุฏ 200
4. **ุฅูุดุงุก ุงููุงุฌูุฉ:** ุงูุจูุช ูุธูุฑ ูู DOM
5. **ุงููุธุงุฆู:** ูุชุญ/ุฅุบูุงู ุงููุญุงุฏุซุฉ ูุนูู
6. **ุฅุฑุณุงู ุงูุฑุณุงุฆู:** API ุงููุญุงุฏุซุฉ ูุนูู ุจูุฌุงุญ

### ๐ ุฑุณุงุฆู ุงูุชุดุฎูุต:
```javascript
// ุฑุณุงุฆู Console ุงููุชููุนุฉ:
"SanadBot: Starting widget initialization..."
"SanadBot: Loading widget from: http://localhost:3002/api/widget/demo"
"SanadBot: Widget script loaded successfully"
```

## ๐ ุงูุชูุตูุงุช ูููุดุฑ

### 1. ูููุทูุฑูู:
- ุชุฃูุฏ ูู ุชุดุบูู `npm run db:seed` ูู ุงูุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ
- ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ (`NEXTAUTH_URL`)
- ุฑุงูุจ ุฑุณุงุฆู Console ูู ุงููุชุตูุญ

### 2. ูููุณุชุฎุฏููู:
- ุงุณุชุฎุฏู ููุฏ ุงูุชุถููู ูู ุงูุฏุงุดุจูุฑุฏ ูุจุงุดุฑุฉ
- ุชุฃูุฏ ูู ุฃู ุงูุจูุช ูุดุท ูู ุงูุฅุนุฏุงุฏุงุช
- ุชุญูู ูู ุนุฏู ูุฌูุฏ Content Security Policy ูููุน ุงูุณูุฑููพุชุงุช

### 3. ููุงุณุชูุดุงู:
```javascript
// ููุชุญูู ูู ุญุงูุฉ ุงูุจูุช ูู Console:
if (window.SanadBot) {
  console.log('โ ุงูุจูุช ูุญูู ุจูุฌุงุญ');
} else {
  console.log('โ ุงูุจูุช ุบูุฑ ูุญูู');
}
```

## ๐ง ุงูุตูุงูุฉ ุงููุณุชูุจููุฉ

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก:
- ุฑุงูุจ ุทูุจุงุช `/api/widget/[botId]`
- ุชุญูู ูู ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ
- ุฑุงูุจ ุฃุฎุทุงุก JavaScript ูู ุงูููุงูุน ุงููุถููุฉ

### ุงูุชุญุฏูุซุงุช:
- ุนูุฏ ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุจูุชุ ุณูุชู ุชุญุฏูุซ ุงููุงุด ุชููุงุฆูุงู
- ูุง ุญุงุฌุฉ ูุชุญุฏูุซ ููุฏ ุงูุชุถููู ูู ุงูููุงูุน ุงูุฎุงุฑุฌูุฉ

## ๐ ุงูุฎูุงุตุฉ

**ุงูุญุงูุฉ:** โ **ุชู ุญู ุฌููุน ุงููุดุงูู ุงูููุชุดูุฉ**

**ุงููุชูุฌุฉ:** ูุธุงู ุงูุชุถููู ูุนูู ุจุดูู ูุงูู ููููู ูููุณุชุฎุฏููู ุชุถููู ุงูุจูุช ูู ููุงูุนูู ุงูุฎุงุฑุฌูุฉ ุจูุฌุงุญ.

**ุงููููุงุช ุงููุญุฏุซุฉ:**
- โ `public/embed.js` - ุฏุนู ููุง ุฎุงุตูุชู ุงูุจูุงูุงุช
- โ `public/test-dashboard-embed.html` - ุตูุญุฉ ุงุฎุชุจุงุฑ ุฌุฏูุฏุฉ
- โ ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุฅุถุงูุฉ ุงูุจูุช ุงูุชุฌุฑูุจู

---

*ุชู ุฅูุดุงุก ูุฐุง ุงูุชูุฑูุฑ ูู: " + new Date().toLocaleString('ar-SA') + "*