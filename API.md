# ๐ก ุชูุซูู ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API)

ูุฐุง ุงูููู ููุซู ุฌููุน ููุงุท ุงูููุงูุฉ (endpoints) ุงููุชุงุญุฉ ูู ูุดุฑูุน ุณูุฏ.

## ๐ ุงููุตุงุฏูุฉ

ุฌููุน APIs ุชุชุทูุจ ูุตุงุฏูุฉ ุจุงุณุชุซูุงุก:
- `/api/auth/*` - ููุงุท ุงููุตุงุฏูุฉ
- `/api/chat` - ุงููุญุงุฏุซุฉ ุงูุนุงูุฉ (ููุจูุชุงุช ุงููุฏูุฌุฉ)

### ุฑุคูุณ ุงููุทููุจุฉ
```http
Authorization: Bearer <session-token>
Content-Type: application/json
```

## ๐ค ุฅุฏุงุฑุฉ ุงูุจูุช

### GET `/api/bot`
ุฌูุจ ูุนูููุงุช ุงูุจูุช ุงูุฎุงุต ุจุงููุณุชุฎุฏู ุงููุณุฌู.

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "id": "bot-id",
  "name": "ุงุณู ุงูุจูุช",
  "primaryColor": "#3B82F6",
  "secondaryColor": "#EFF6FF",
  "placeholderText": "ุงูุชุจ ุฑุณุงูุชู ููุง...",
  "welcomeMessage": "ูุฑุญุจุงู! ููู ูููููู ูุณุงุนุฏุชูุ",
  "personality": "ูุฏูุฏ ููููุฏ",
  "fallbackMessage": "ุนุฐุฑุงูุ ูุง ุฃุณุชุทูุน ุงูุฅุฌุงุจุฉ ุนูู ูุฐุง ุงูุณุคุงู."
}
```

### PUT `/api/bot`
ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุจูุช.

**ุงูุทูุจ:**
```json
{
  "name": "ุงุณู ุงูุจูุช ุงูุฌุฏูุฏ",
  "primaryColor": "#10B981",
  "secondaryColor": "#ECFDF5",
  "placeholderText": "ุงุณุฃู ุฃู ุดูุก...",
  "welcomeMessage": "ุฃููุงู ูุณููุงู!",
  "personality": "ุฎุจูุฑ ููุชุฎุตุต",
  "fallbackMessage": "ุณุฃุญุงูู ูุณุงุนุฏุชู ุจุทุฑููุฉ ุฃุฎุฑู."
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "message": "ุชู ุชุญุฏูุซ ุงูุจูุช ุจูุฌุงุญ"
}
```

## ๐ฌ ุงููุญุงุฏุซุฉ

### POST `/api/chat`
ุฅุฑุณุงู ุฑุณุงูุฉ ูููุณุงุนุฏ ุงูุฐูู.

**ุงูุทูุจ:**
```json
{
  "message": "ูุง ูู ุณูุฏุ",
  "botId": "bot-id" // ุงุฎุชูุงุฑู ููุจูุชุงุช ุงููุฏูุฌุฉ
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "response": "ุณูุฏ ูู ููุตุฉ ูุฅูุดุงุก ูุณุงุนุฏูู ุฃุฐููุงุก...",
  "source": "qa" // qa, rag, fallback
}
```

### ุขููุฉ ุนูู ุงููุญุงุฏุซุฉ
1. **ุงูุจุญุซ ูู Q&A**: ุงูุจุญุซ ุนู ุฅุฌุงุจุฉ ูุญููุธุฉ ูุณุจูุงู
2. **ุชูุนูู RAG**: ุงุณุชุฎุฏุงู ูุตุงุฏุฑ ุงููุนุฑูุฉ ูุน Gemini AI
3. **ุงูุฑุฏ ุงูุงุญุชูุงุทู**: ุฑุณุงูุฉ ุงูุชุฑุงุถูุฉ

## โ ุงูุฃุณุฆูุฉ ูุงูุฃุฌูุจุฉ

### GET `/api/qas`
ุฌูุจ ุฌููุน ุงูุฃุณุฆูุฉ ูุงูุฃุฌูุจุฉ.

**ุงูุงุณุชุฌุงุจุฉ:**
```json
[
  {
    "id": "qa-id",
    "question": "ูุง ูู ุณูุฏุ",
    "answer": "ุณูุฏ ูู ููุตุฉ ุฐููุฉ...",
    "isActive": true,
    "createdAt": "2024-01-01T00:00:00Z"
  }
]
```

### POST `/api/qas`
ุฅุถุงูุฉ ุณุคุงู ูุฌูุงุจ ุฌุฏูุฏ.

**ุงูุทูุจ:**
```json
{
  "question": "ููู ุฃุณุชุฎุฏู ุณูุฏุ",
  "answer": "ููููู ุงูุจุฏุก ุจุฅูุดุงุก ุญุณุงุจ..."
}
```

### PUT `/api/qas/[id]`
ุชุญุฏูุซ ุณุคุงู ูุฌูุงุจ ููุฌูุฏ.

**ุงูุทูุจ:**
```json
{
  "question": "ุงูุณุคุงู ุงููุญุฏุซ",
  "answer": "ุงูุฌูุงุจ ุงููุญุฏุซ",
  "isActive": true
}
```

### DELETE `/api/qas/[id]`
ุญุฐู ุณุคุงู ูุฌูุงุจ.

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "message": "ุชู ุญุฐู ุงูุณุคุงู ุจูุฌุงุญ"
}
```

## ๐ ูุตุงุฏุฑ ุงููุนุฑูุฉ

### GET `/api/knowledge-sources`
ุฌูุจ ุฌููุน ูุตุงุฏุฑ ุงููุนุฑูุฉ.

**ุงูุงุณุชุฌุงุจุฉ:**
```json
[
  {
    "id": "source-id",
    "type": "text", // text, link, file
    "title": "ุนู ุงูุดุฑูุฉ",
    "content": "ูุญุชูู ุงููุต...",
    "url": null,
    "fileName": null,
    "createdAt": "2024-01-01T00:00:00Z"
  }
]
```

### POST `/api/knowledge-sources`
ุฅุถุงูุฉ ูุตุฏุฑ ูุนุฑูุฉ ุฌุฏูุฏ.

**ูููุต:**
```json
{
  "type": "text",
  "title": "ูุนูููุงุช ุงูุดุฑูุฉ",
  "content": "ุชุฃุณุณุช ุงูุดุฑูุฉ ูู..."
}
```

**ููุฑุงุจุท:**
```json
{
  "type": "link",
  "title": "ูููุน ุงูุดุฑูุฉ",
  "url": "https://example.com"
}
```

**ููููู:**
```json
{
  "type": "file",
  "title": "ุฏููู ุงููุณุชุฎุฏู",
  "fileName": "user-guide.pdf",
  "content": "ูุญุชูู ุงูููู ุงููุณุชุฎุฑุฌ..."
}
```

### DELETE `/api/knowledge-sources/[id]`
ุญุฐู ูุตุฏุฑ ูุนุฑูุฉ.

## ๐ ุงููุตุงุฏูุฉ

### POST `/api/auth/register`
ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ.

**ุงูุทูุจ:**
```json
{
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "email": "ahmed@example.com",
  "password": "password123",
  "confirmPassword": "password123"
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "message": "ุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ",
  "user": {
    "id": "user-id",
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "email": "ahmed@example.com"
  }
}
```

### POST `/api/auth/signin`
ุชุณุฌูู ุงูุฏุฎูู (ูุชู ุนุจุฑ NextAuth.js).

### POST `/api/auth/signout`
ุชุณุฌูู ุงูุฎุฑูุฌ (ูุชู ุนุจุฑ NextAuth.js).

## ๐ ุงูุฅุญุตุงุฆูุงุช

### GET `/api/stats`
ุฌูุจ ุฅุญุตุงุฆูุงุช ุงูุจูุช.

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "conversations": 150,
  "qas": 25,
  "knowledgeSources": 10,
  "lastActivity": "2024-01-01T12:00:00Z"
}
```

## ๐จ๏ธ ุงููุญุงุฏุซุงุช

### GET `/api/conversations`
ุฌูุจ ุณุฌู ุงููุญุงุฏุซุงุช.

**ุงููุนุงููุงุช:**
- `page`: ุฑูู ุงูุตูุญุฉ (ุงูุชุฑุงุถู: 1)
- `limit`: ุนุฏุฏ ุงููุชุงุฆุฌ (ุงูุชุฑุงุถู: 20)

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "conversations": [
    {
      "id": "conv-id",
      "userMessage": "ูุง ูู ุณูุฏุ",
      "botResponse": "ุณูุฏ ูู ููุตุฉ...",
      "source": "qa",
      "createdAt": "2024-01-01T12:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 150,
    "pages": 8
  }
}
```

## ๐จ ุฑููุฒ ุงูุฃุฎุทุงุก

| ุงูุฑูุฒ | ุงููุตู | ุงููุนูู |
|-------|--------|--------|
| 200 | OK | ูุฌุญ ุงูุทูุจ |
| 201 | Created | ุชู ุฅูุดุงุก ุงูููุฑุฏ |
| 400 | Bad Request | ุทูุจ ุบูุฑ ุตุญูุญ |
| 401 | Unauthorized | ุบูุฑ ูุตุฑุญ |
| 403 | Forbidden | ููููุน |
| 404 | Not Found | ุบูุฑ ููุฌูุฏ |
| 500 | Internal Server Error | ุฎุทุฃ ูู ุงูุฎุงุฏู |

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### JavaScript/TypeScript
```typescript
// ุฌูุจ ูุนูููุงุช ุงูุจูุช
const response = await fetch('/api/bot', {
  headers: {
    'Authorization': `Bearer ${sessionToken}`,
    'Content-Type': 'application/json'
  }
});
const bot = await response.json();

// ุฅุฑุณุงู ุฑุณุงูุฉ
const chatResponse = await fetch('/api/chat', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    message: 'ูุฑุญุจุงู',
    botId: 'bot-id'
  })
});
const result = await chatResponse.json();
```

### cURL
```bash
# ุฌูุจ ุงูุฃุณุฆูุฉ ูุงูุฃุฌูุจุฉ
curl -X GET "http://localhost:3002/api/qas" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"

# ุฅุถุงูุฉ ุณุคุงู ุฌุฏูุฏ
curl -X POST "http://localhost:3002/api/qas" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "ูุง ูู ุณูุฏุ",
    "answer": "ุณูุฏ ูู ููุตุฉ ุฐููุฉ"
  }'
```

## ๐ ูุนุฏู ุงูุทูุจุงุช

- **ุงููุตุงุฏูุฉ**: 5 ุทูุจุงุช/ุฏูููุฉ
- **ุงููุญุงุฏุซุฉ**: 30 ุทูุจ/ุฏูููุฉ
- **ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช**: 60 ุทูุจ/ุฏูููุฉ
- **ุงูุฅุญุตุงุฆูุงุช**: 10 ุทูุจุงุช/ุฏูููุฉ

## ๐ CORS

ุงููุฌุงูุงุช ุงููุณููุญุฉ:
- `http://localhost:3002` (ุงูุชุทููุฑ)
- `https://yourdomain.com` (ุงูุฅูุชุงุฌ)

## ๐ฑ ุฏุนู ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ

ุฌููุน APIs ุชุฏุนู ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ ูุชุณุชุฌูุจ ุจุชูุณูู JSON ูุชูุงูู.

---

**ูููุฒูุฏ ูู ุงููุณุงุนุฏุฉุ ุฑุงุฌุน [ุงูุชูุซูู ุงููุงูู](README.md) ุฃู [ุฏููู ุงููุณุงููุฉ](CONTRIBUTING.md)**